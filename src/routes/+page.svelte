<script>
  export const tableHeadings = [
    {
      monthDay: 25,
      weekDay: 'Thu'
    },
    {
      monthDay: 26,
      weekDay: 'Fri'
    },
    {
      monthDay: 27,
      weekDay: 'Sat'
    },
    {
      monthDay: 28,
      weekDay: 'Sun'
    },
    {
      monthDay: 29,
      weekDay: 'Mon'
    },
    {
      monthDay: 30,
      weekDay: 'Tue'
    },
    {
      monthDay: 31,
      weekDay: 'Wed'
    },
    {
      monthDay: 1,
      weekDay: 'Thu'
    },
    {
      monthDay: 2,
      weekDay: 'Fri'
    },
    {
      monthDay: 3,
      weekDay: 'Sat'
    },
    // {
    //   monthDay: 4,
    //   weekDay: 'Sun'
    // },
    // {
    //   monthDay: 5,
    //   weekDay: 'Mon'
    // },
    // {
    //   monthDay: 6,
    //   weekDay: 'Tue'
    // },
    // {
    //   monthDay: 7,
    //   weekDay: 'Wed'
    // },
    // {
    //   monthDay: 8,
    //   weekDay: 'Thu'
    // },
    // {
    //   monthDay: 9,
    //   weekDay: 'Fri'
    // },
    // {
    //   monthDay: 10,
    //   weekDay: 'Sat'
    // },
    // {
    //   monthDay: 11,
    //   weekDay: 'Sun'
    // },
    // {
    //   monthDay: 12,
    //   weekDay: 'Mon'
    // },
    // {
    //   monthDay: 13,
    //   weekDay: 'Tue'
    // },
    // {
    //   monthDay: 14,
    //   weekDay: 'Wed'
    // },
    // {
    //   monthDay: 15,
    //   weekDay: 'Thu'
    // },
    // {
    //   monthDay: 16,
    //   weekDay: 'Fri'
    // },
    // {
    //   monthDay: 17,
    //   weekDay: 'Sat'
    // },
    // {
    //   monthDay: 18,
    //   weekDay: 'Sun'
    // },
    // {
    //   monthDay: 19,
    //   weekDay: 'Mon'
    // },
    // {
    //   monthDay: 20,
    //   weekDay: 'Tue'
    // },
    // {
    //   monthDay: 21,
    //   weekDay: 'Wed'
    // },
    // {
    //   monthDay: 22,
    //   weekDay: 'Thu'
    // },
    // {
    //   monthDay: 23,
    //   weekDay: 'Fri'
    // },
  ]

  export const bedRows = [
    {
      bedName: 'r1 b1',
      schedule: [
        {
          date: '2023-05-25',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            },
            {
              type: 'void',
              bookingID: '23847194',
              length: 10,
              reason: 'Deep clean',
              startDate: '2023-05-16',
              startDateFormatted: '16 May',
              endDate: '2023-05-25',
              endDateFormatted: '25 May'
            }
          ]
        },
        {
          date: '2023-05-26',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-27',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-28',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-29',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-30',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-31',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-06-01',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-06-02',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-06-03',
          bookings: [
            {
              type: 'booking',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 30,
              personName: 'Darius Salom',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        }
      ]
    },
    {
      bedName: 'r2 b1',
      schedule: [
        {
          date: '2023-05-25',
          bookings: [
            {
              type: 'void',
              bookingID: '1c71346a-fb07-11ed-be56-0242ac120002',
              length: 5,
              voidResearch: 'Deepcleaning',
              startDate: '2023-05-25',
              startDateFormatted: '25 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            },
          ]
        },
        {
          date: '2023-05-26',
          bookings: [
          ]
        },
        {
          date: '2023-05-27',
          bookings: [
          ]
        },
        {
          date: '2023-05-28',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-29',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-30',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-05-31',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-06-01',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-06-02',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
        {
          date: '2023-06-03',
          bookings: [
            {
              type: 'booking',
              bookingID: 'asdasf2',
              length: 10,
              personName: 'Adam Hughes',
              startDate: '2023-05-28',
              startDateFormatted: '28 May',
              endDate: '2023-06-26',
              endDateFormatted: '26 Jun'
            }
          ]
        },
      ]
    },
  ]
</script>

<h1>30 day Scheduler Prototype</h1>

<section aria-label="Overview calendar">
  <div class="scrollable">
    <table cellspacing="0">

      <colgroup>
        <col>
        {#each tableHeadings as tableHeading}
          {#if tableHeading.weekDay === 'Sat' || tableHeading.weekDay === 'Sun'}
            <col class="weekend">
          {:else}
            <col>
          {/if}
        {/each}
      </colgroup>

      <thead>
        <th>Room/Bed</th>
        {#each tableHeadings as tableHeading}
          {#if tableHeading.weekDay === 'Sat' || tableHeading.weekDay === 'Sun'}
            <th class="weekend">{tableHeading.monthDay}</th>
          {:else}
            <th>{tableHeading.monthDay}</th>
          {/if}
        {/each}
      </thead>

      <tbody>
        {#each bedRows as bedRow}
          <tr>
            <th class="bed-heading" scope="row">{bedRow.bedName}</th>

            {#each bedRow.schedule as day}

              {#if day.bookings.length === 1}

                {#if day.bookings[0].type === 'booking'}
                  <td class="booking booking-id-{day.bookings[0].bookingID}">
                    <a href="/booking/{day.bookings[0].bookingID}" title="{day.bookings[0].personName} ({day.bookings[0].startDateFormatted} - {day.bookings[0].endDateFormatted})">{day.bookings[0].personName} ({day.bookings[0].startDateFormatted} - {day.bookings[0].endDateFormatted})</a>
                  </td>
                {:else}
                  <td class="void">
                    Void
                  </td>
                {/if}

              {:else if day.bookings.length > 1}
                <td class="conflict">
                  <p>Overbooked</p>
                </td>

              {:else}
                <td class="open">
                
                </td>
              {/if}
            {/each}
          </tr>
        {/each}
      </tbody>
    </table>
  </div>
</section>


<style>
  .scrollable {
    position: relative;
    overflow: scroll;
  }

  .scrollable table {
    width: 900px;
  }

  td {
    border: 1px solid #ccc;
    border-bottom: 1px solid #1f1f1f;
  }

  .clash {
    background-color: red;
  }

  .clash p {
    display: block !important;
  }

  th {
    font-size: 10px;
    width: 20px;
  }

  th.bed-heading {
    width: 40px;
  }

  .room {
    font-size: 8px;
  }

  .booking {
    position: relative;
    background-color: rgba(86, 148, 202, 0.25);
    color: #000;
    font-size: 14px;
  }

  .open {
    background-color: #fff;
    font-size: 0;
  }

  .void {
    background-color: rgba(177, 180, 182, 0.5);
  }

  .conflict {
    background-color: red;
    color: #000;
    font-size: 14px;
  }

  .weekend {
    background: #ccc;
  }

</style>
